var d=Object.defineProperty;var h=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>h(e,typeof t!="symbol"?t+"":t,n);import{B as l,R as s,M as c,P as w,L as f,E as g,a as R,b as m,d as p,e as C,U as E,S as L}from"./error-CiL0OtYn.js";class v extends l{constructor(){super();u(this,"addRoute",(n,a,o=[])=>{this.routes.push({path:n,handler:a,guards:o})});u(this,"init",()=>{location.hash||(location.hash="#/"),this.handleRouteChange()});u(this,"handleRouteChange",()=>{const n=location.hash.slice(1)||"/";if(this.lastHash===n)return;this.lastHash=n;const a=this.routes.find(o=>o.path===n)||this.routes.find(o=>o.path===s.error);if(a){for(const o of a.guards)if(!o())return;a.handler()}});u(this,"navigate",n=>{window.location.hash=n});this.lastHash=null,this.routes=[],this.init=this.init.bind(this)}}const r=new v,H=new L("user"),i=new E(H),M=new c,V=new w,$=new f,P=new g,S=new R(M,i,r),U=new m(V,i,r),b=new p($,i,r),q=new C(P,i),B=()=>{var e;return(e=i.userInfo)!=null&&e.username?!0:(r.navigate(s.login),!1)},I=()=>{var e;return(e=i.userInfo)!=null&&e.username?(r.navigate(s.main),!1):!0};r.addRoute(s.main,S.render);r.addRoute(s.profile,U.render,[B]);r.addRoute(s.login,b.render,[I]);r.addRoute(s.error,q.render);document.addEventListener("DOMContentLoaded",r.init);window.addEventListener("hashchange",r.init);window.addEventListener("routeChange",r.init);
