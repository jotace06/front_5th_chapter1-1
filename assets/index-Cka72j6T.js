var d=Object.defineProperty;var h=(e,r,n)=>r in e?d(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var u=(e,r,n)=>h(e,typeof r!="symbol"?r+"":r,n);import{B as c,R as o,M as w,P as g,L as f,E as p,a as P,b as m,c as R,d as v,U as C,S as E}from"./error-DQPu2DZ-.js";const l={get basePath(){return"/front_5th_chapter1-1"},getRoutePath(e){return e.replace(this.basePath,"")||"/"},getFullPath(e){return`${this.basePath}${e}`}};class L extends c{constructor(){super(...arguments);u(this,"handleRouteChange",()=>{const n=l.getRoutePath(window.location.pathname);if(console.log("Current pathname:",window.location.pathname),console.log("After removing base path:",n),this.lastPath===n)return;this.lastPath=n;const a=this.routes.find(i=>i.path===n)||this.routes.find(i=>i.path===o.error);if(a){for(const i of a.guards)if(!i())return;a.handler()}});u(this,"navigate",n=>{const a=l.getFullPath(n);console.log("Navigating to:",a),window.history.pushState({},"",a),window.dispatchEvent(new Event("routeChange"))})}}const t=new L,$=new E("user"),s=new C($),b=new w,M=new g,S=new f,V=new p,U=new P(b,s,t),q=new m(M,s,t),y=new R(S,s,t),A=new v(V,s),B=()=>{var e;return(e=s.userInfo)!=null&&e.username?!0:(t.navigate(o.login),!1)},F=()=>{var e;return(e=s.userInfo)!=null&&e.username?(t.navigate(o.main),!1):!0};t.addRoute(o.main,U.render);t.addRoute(o.profile,q.render,[B]);t.addRoute(o.login,y.render,[F]);t.addRoute(o.error,A.render);document.addEventListener("DOMContentLoaded",t.init);window.addEventListener("popstate",t.init);window.addEventListener("routeChange",t.init);
