var d=Object.defineProperty;var l=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var u=(e,t,r)=>l(e,typeof t!="symbol"?t+"":t,r);import{B as w,R as o,M as c,P as f,L as h,E as g,a as p,b as m,c as E,d as R,U as v,S as C}from"./error-DQPu2DZ-.js";class L extends w{constructor(){super(...arguments);u(this,"handleRouteChange",()=>{const r=window.location.pathname||"/";if(this.lastPath===r)return;this.lastPath=r;const i=this.routes.find(a=>a.path===r)||this.routes.find(a=>a.path===o.error);if(i){for(const a of i.guards)if(!a())return;i.handler()}});u(this,"navigate",r=>{window.history.pushState({},"",r),window.dispatchEvent(new Event("routeChange"))})}}const n=new L,P=new C("user"),s=new v(P),M=new c,S=new f,V=new h,$=new g,U=new p(M,s,n),q=new m(S,s,n),y=new E(V,s,n),B=new R($,s),I=()=>{var e;return(e=s.userInfo)!=null&&e.username?!0:(n.navigate(o.login),!1)},O=()=>{var e;return(e=s.userInfo)!=null&&e.username?(n.navigate(o.main),!1):!0};n.addRoute(o.main,U.render);n.addRoute(o.profile,q.render,[I]);n.addRoute(o.login,y.render,[O]);n.addRoute(o.error,B.render);document.addEventListener("DOMContentLoaded",n.init);window.addEventListener("popstate",n.init);window.addEventListener("routeChange",n.init);
