var d=Object.defineProperty;var h=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>h(e,typeof t!="symbol"?t+"":t,n);import{B as l,R as s,M as c,P as w,L as f,E as g,a as R,b as m,d as p,e as C,U as E,S as L}from"./error-CeDfXveu.js";class v extends l{constructor(){super();u(this,"addRoute",(n,i,o=[])=>{this.routes.push({path:n,handler:i,guards:o})});u(this,"init",()=>{location.hash||(location.hash="#/"),this.handleRouteChange()});u(this,"handleRouteChange",()=>{const n=location.hash.slice(1)||"/";if(this.lastHash===n)return;this.lastHash=n;const i=this.routes.find(o=>o.path===n)||this.routes.find(o=>o.path===s.error);if(i){for(const o of i.guards)if(!o())return;i.handler()}});u(this,"navigate",n=>{window.location.hash=n});this.lastHash=null,this.routes=[]}}const r=new v,H=new L("user"),a=new E(H),M=new c,V=new w,$=new f,P=new g,S=new R(M,a,r),U=new m(V,a,r),q=new p($,a,r),B=new C(P,a),I=()=>{var e;return(e=a.userInfo)!=null&&e.username?!0:(r.navigate(s.login),!1)},O=()=>{var e;return(e=a.userInfo)!=null&&e.username?(r.navigate(s.main),!1):!0};r.addRoute(s.main,S.render);r.addRoute(s.profile,U.render,[I]);r.addRoute(s.login,q.render,[O]);r.addRoute(s.error,B.render);document.addEventListener("DOMContentLoaded",r.init);window.addEventListener("hashchange",r.init);window.addEventListener("routeChange",r.init);
