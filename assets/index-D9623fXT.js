var d=Object.defineProperty;var l=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var u=(e,t,r)=>l(e,typeof t!="symbol"?t+"":t,r);import{B as w,n as c,R as o,c as h,M as f,P as g,L as m,E as p,a as E,b as P,d as R,e as v,U as C,S as L}from"./error-BtFLsw90.js";class M extends w{constructor(){super(...arguments);u(this,"handleRouteChange",()=>{const r=c(window.location.pathname);if(this.lastPath===r)return;this.lastPath=r;const s=this.routes.find(i=>i.path===r)||this.routes.find(i=>i.path===o.error);if(s){for(const i of s.guards)if(!i())return;s.handler()}});u(this,"navigate",r=>{const s=h(r);window.history.pushState({},"",s),window.dispatchEvent(new Event("routeChange"))})}}const n=new M,S=new L("user"),a=new C(S),V=new f,$=new g,U=new m,q=new p,y=new E(V,a,n),B=new P($,a,n),I=new R(U,a,n),O=new v(q,a),b=()=>{var e;return(e=a.userInfo)!=null&&e.username?!0:(n.navigate(o.login),!1)},x=()=>{var e;return(e=a.userInfo)!=null&&e.username?(n.navigate(o.main),!1):!0};n.addRoute(o.main,y.render);n.addRoute(o.profile,B.render,[b]);n.addRoute(o.login,I.render,[x]);n.addRoute(o.error,O.render);document.addEventListener("DOMContentLoaded",n.init);window.addEventListener("popstate",n.init);window.addEventListener("routeChange",n.init);
