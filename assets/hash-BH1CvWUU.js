var d=Object.defineProperty;var h=(e,r,n)=>r in e?d(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var u=(e,r,n)=>h(e,typeof r!="symbol"?r+"":r,n);import{B as l,R as s,M as c,P as w,L as f,E as g,a as R,b as m,c as p,d as C,U as E,S as L}from"./error-DQPu2DZ-.js";class v extends l{constructor(){super();u(this,"addRoute",(n,a,o=[])=>{this.routes.push({path:n,handler:a,guards:o})});u(this,"init",()=>{window.location.hash||(window.location.hash="#/"),this.handleRouteChange()});u(this,"handleRouteChange",()=>{const n=window.location.hash.slice(1)||"/";if(this.lastPath===n)return;this.lastPath=n;const a=this.routes.find(o=>o.path===n)||this.routes.find(o=>o.path===s.error);if(a){for(const o of a.guards)if(!o())return;a.handler()}});u(this,"navigate",n=>{window.location.hash=n});this.lastPath=null,this.routes=[],this.init=this.init.bind(this)}}const t=new v,P=new L("user"),i=new E(P),M=new c,V=new w,$=new f,S=new g,U=new R(M,i,t),b=new m(V,i,t),q=new p($,i,t),B=new C(S,i),H=()=>{var e;return(e=i.userInfo)!=null&&e.username?!0:(t.navigate(s.login),!1)},I=()=>{var e;return(e=i.userInfo)!=null&&e.username?(t.navigate(s.main),!1):!0};t.addRoute(s.main,U.render);t.addRoute(s.profile,b.render,[H]);t.addRoute(s.login,q.render,[I]);t.addRoute(s.error,B.render);document.addEventListener("DOMContentLoaded",t.init);window.addEventListener("hashchange",t.init);window.addEventListener("routeChange",t.init);
